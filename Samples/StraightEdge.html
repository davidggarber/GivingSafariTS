<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"></meta>
    <script> var exports = {}; </script>
    <script src="../js/kit.js"></script>
    <script src="demoTools.js"></script>
    <script>
      const boiler = {
        'safari': 'Sample',
        'title': 'Straight Edge Demo',
        'author': 'David Garber',
        'copyright': '2023',
        'type': 'Trivia',
        'abilities': {
          'straightEdge': true
        }
      };

      var surface;
      var container;

      function init() {
        surface = document.getElementById('surface');
        container = document.getElementById('_straight-edge-container');

        // Copy the surface template before running the exploding the puzzle during boilerplate initialization
        boilerplate(boiler);

        attr2Input(surface, 'data-max-points');
        attr2Input(surface, 'data-hover-range');
        attr2Input(surface, 'data-angle-constraints');
        attr2Input(surface, 'data-show-open-drag');
        attr2Input(surface, 'data-can-cross-self');
        class2Check(container, 'straight-edge-container');

        showHtml();
      }

      function update() {
        input2Attr(surface, 'data-max-points');
        input2Attr(surface, 'data-hover-range');
        input2Attr(surface, 'data-angle-constraints');
        input2Attr(surface, 'data-show-open-drag');
        input2Attr(surface, 'data-can-cross-self');
        check2Class(container, 'straight-edge-container');

        showHtml();
      }

      function showHtml() {
        document.getElementById('svgHTML').innerHTML = friendlyStartTag(surface);
      }

      function quick(btn) {
        quickBtn(btn);
        update();
      }
      function clearEdges() {
        clearAllStraightEdges('surface');
      }
    </script>
    <style>
      #customize th {
        padding-top: 0.2in;
        padding-bottom: 0.1in;
      }
      #surface {
        user-select: none; 
        -webkit-user-select: none; /* Safari */        
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* IE10+/Edge */
      }
    </style>
  </head>
  <body onload="init();">
    <div id="pageBody">
      <p class="flavor">
        A sample word search. Pick the versatility that makes sense for your puzzle.
      </p>

      <svg id="surface" width="336px" height="336px" class="straight-edge-area">
        <g id="_straight-edge-container" class="straight-edge-container"></g>

        <g transform="translate(168 168)">
          <ellipse cx="0" cy="0" rx="160" ry="160" fill="none" stroke="black" stroke-width="1px"></ellipse>

          <g class="vertex-g" transform="translate(0 -150)">
            <text>12</text>
            <ellipse class="vertex" cx="0" cy="0" rx="4" ry="4"></ellipse>
          </g>

          <g class="vertex-g" transform="translate(75 -130)">
            <text>1</text>
            <ellipse class="vertex" cx="0" cy="0" rx="4" ry="4"></ellipse>
          </g>

          <g class="vertex-g" transform="translate(130 -75)">
            <text>2</text>
            <ellipse class="vertex" cx="0" cy="0" rx="4" ry="4"></ellipse>
          </g>

          <g class="vertex-g" transform="translate(150 0)">
            <text>3</text>
            <ellipse class="vertex" cx="0" cy="0" rx="4" ry="4"></ellipse>
          </g>

          <g class="vertex-g" transform="translate(0 150)">
            <text>6</text>
            <ellipse class="vertex" cx="0" cy="0" rx="4" ry="4"></ellipse>
          </g>

          <g class="vertex-g" transform="translate(-150 0)">
            <text>9</text>
            <ellipse class="vertex" cx="0" cy="0" rx="4" ry="4"></ellipse>
          </g>
        </g>

      </svg>

      <div style="width:336px; text-align: center;">
        <button onclick="clearEdges()">Clear Selection</button>
      </div>

      <table id="customize">
        <tr><th colspan="3">
          Customize the &lt;svg class='<u>straight-edge-area</u>'&gt;
        </th></tr>
        <tr>
          <td>data-max-points</td>
          <td><input id="data-max-points" type='text' onkeyup="update()"></td>
          <td>
            <button onclick="quick(this)">2</button>
            <button onclick="quick(this)">5</button>
            <button onclick="quick(this)">100</button>
            <button onclick="quick(this)">unset = 2</button>
          </td>
        </tr>
        <tr>
          <td>data-hover-range</td>
          <td><input id="data-hover-range" type='text' onkeyup="update()"></td>
          <td>
            <button onclick="quick(this)">30</button>
            <button onclick="quick(this)">10</button>
            <button onclick="quick(this)">60</button>
            <button onclick="quick(this)">unset = <i>30</i></button>
          </td>
        </tr>
        <tr>
          <td>data-angle-constraints</td>
          <td><input id="data-angle-constraints" type='text' onkeyup="update()"></td>
          <td>
            <button onclick="quick(this)">45</button>
            <button onclick="quick(this)">90</button>
            <button onclick="quick(this)">1</button>
            <button onclick="quick(this)">unset = <i>any</i></button>
          </td>
        </tr>
        <tr>
          <td>data-show-open-drag</td>
          <td><input id="data-show-open-drag" type='text' onkeyup="update()"></td>
          <td>
            <button onclick="quick(this)">true</button>
            <button onclick="quick(this)">false</button>
            <button onclick="quick(this)">unset = <i>true</i></button>
          </td>
        </tr>
        <tr>
          <td>data-can-cross-self</td>
          <td><input id="data-can-cross-self" type='text' onkeyup="update()"></td>
          <td>
            <button onclick="quick(this)">true</button>
            <button onclick="quick(this)">false</button>
            <button onclick="quick(this)">unset = <i>false</i></button>
          </td>
        </tr>
        <tr><th colspan="3">
          Customize the &lt;g class='<u>straight-edge-container</u>'&gt;
        </th></tr>
        <tr>
          <td>straight-edge-container</td>
          <td><input id="straight-edge-container" type='checkbox' onchange="update()"></td>
          <td>exists</td>
        </tr>
      </table>

      <p>
        <span id="svgHTML" style="display: inline-block; border: solid 2px blue; padding:0.1in">
        </span>
      </p>
    </div>
  </body>
</html>
